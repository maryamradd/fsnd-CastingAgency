(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{264:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),i=n(47),s=n.n(i),o=n(13),l=n(15),j=n(24),d=n(158),b=n(25),u=n(279),h=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(c.jsx)(j.a,Object(o.a)({component:Object(b.c)(t,{onRedirecting:function(){return Object(c.jsx)(u.a,{})}})},n))},x=n(5),O=n(283),m=n(284),p=n(163),f=n(285),g=n(286),v=n(280),y=n(282),_=n(281),S=function(){return Object(c.jsxs)(v.a,{maxW:"xs",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:"0.50",h:"250px",mx:"auto",my:"0",children:[Object(c.jsx)(_.a,{}),Object(c.jsx)(y.a,{mt:"2",children:"image not available"})]})},k=function(e){var t=e.actor,n=t.id,r=t.first_name,a=t.last_name,i=t.age,s=t.gender,o=t.image_link,j=t.seeking_role;return Object(c.jsx)(O.a,{role:"group",children:Object(c.jsx)(l.c,{to:"/actors/".concat(n),children:Object(c.jsxs)(m.a,{maxW:"md",w:"250px",h:"260px",rounded:"lg",borderRadius:"sm",boxShadow:"md",bg:Object(p.d)("gray.50","gray.700"),_groupHover:{transform:"translateY( -3px ) scale( 1.02 ) ",boxShadow:"2xl"},children:[Object(c.jsx)(m.a,{w:"250px",h:"180px",overflow:"hidden",children:Object(c.jsx)(f.a,{src:o,alt:"actor image",fallback:Object(c.jsx)(S,{}),objectFit:"cover",boxSize:"250px"})}),Object(c.jsxs)(m.a,{pb:"6",pt:"2",pl:"4",children:[Object(c.jsxs)(m.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",isTruncated:!0,children:[r," ",a]}),Object(c.jsx)(m.a,{d:"flex",alignItems:"baseline",children:Object(c.jsxs)(m.a,{mt:"4px",color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",children:[i," yrs",Object(c.jsxs)(m.a,{as:"span",opacity:.7,pl:"4px",children:["\u2022 ",s]}),j?Object(c.jsx)(g.a,{colorScheme:"teal",ml:"19px",children:"Seeking role"}):null]})})]})]})})})},w=n(305),A=n(309),C=n(289),R=n(310),E=n(290),F=n(41),W=n.n(F),q="https://cast1ng-agency.herokuapp.com/api",z=function(){return W()("https://cast1ng-agency.herokuapp.com/api/actors",{headers:{"content-type":"application/json"}}).then((function(e){return e.data})).catch((function(e){e.response?console.log(e.response):e.request&&console.log(e.request)}))},I=function(e){var t=q+"/actors/"+e;return W()(t,{headers:{"content-type":"application/json"}}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request&&console.log(e.request)}))},T=function(e,t){var n=q+"/actors/"+e;return W()(n,{method:"DELETE",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request}))},D=function(e,t){return W()("https://cast1ng-agency.herokuapp.com/api/actors",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)},data:e}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request}))},H=function(e,t,n){var c=q+"/actors/"+t;return W()(c,{method:"PATCH",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(n)},data:e}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request}))},L=function(){var e=Object(r.useState)([]),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Object(w.a)(),s=Object(b.b)().isAuthenticated;return Object(r.useEffect)((function(){z().then((function(e){a(e.actors)})).catch((function(e){console.log(e),i({title:"Error",description:"An error has occured, Please try again later.",status:"error",duration:3e3,isClosable:!0})}))}),[]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(O.a,{maxW:"xl",position:"relative",minH:"calc(100vh - 81px)",children:[Object(c.jsxs)(A.a,{columns:2,spacing:[52,36],pt:"20",children:[Object(c.jsx)(m.a,{children:Object(c.jsx)(C.a,{h:"80px",children:Object(c.jsx)(y.a,{textStyle:"heading",children:"Actors"})})}),Object(c.jsx)(m.a,{children:Object(c.jsx)(C.a,{h:"80px",children:s?Object(c.jsx)(l.c,{to:"/actors/add",children:Object(c.jsxs)(R.a,{colorScheme:"teal",variant:"solid",children:[Object(c.jsx)(E.a,{w:5,h:5,pr:"2"})," Add Actor"]})}):null})})]}),Object(c.jsx)(C.a,{children:Object(c.jsx)(v.a,{p:"10",mt:"5",children:Object(c.jsx)(A.a,{columns:[1,2,3],spacing:"40px",children:n.map((function(e){return Object(c.jsx)(m.a,{children:Object(c.jsx)(k,{actor:e})},e.id)}))})})})]})})},M=n(291),P=n(306),N=n(304),B=n(295),G=n(296),Y=n(292),V=n(293),J=function(){var e=Object(p.c)(),t=e.colorMode,n=e.toggleColorMode,r=Object(b.b)(),a=r.loginWithRedirect,i=r.logout,s=r.user,o=r.isAuthenticated,j=r.isLoading;return Object(c.jsxs)(v.a,{pt:"6",pb:"4",px:"8",borderBottom:"1px",borderColor:Object(p.d)("gray.200","gray.700"),children:[Object(c.jsx)(m.a,{px:"4",children:Object(c.jsx)(l.c,{to:"/",children:Object(c.jsx)(m.a,{as:"button",h:"42px",w:"42px",color:"white",borderRadius:"50%",fontSize:"16px",fontWeight:"bold",bg:"linear-gradient(299deg, rgba(44,122,123,1) 0%, rgba(79,209,197,1) 100%)",_hover:{bg:"#38B2AC"},_active:{bg:"#4FD1C5",outline:"none"},_focus:{outline:"none"},children:"CA"})})}),Object(c.jsx)(m.a,{px:"4",children:Object(c.jsx)(l.c,{to:"/actors",children:Object(c.jsx)(R.a,{colorScheme:"teal",variant:"ghost",borderRadius:"8px",children:"Actors"})})}),Object(c.jsx)(m.a,{px:"4",children:Object(c.jsx)(l.c,{to:"/movies",children:Object(c.jsx)(R.a,{colorScheme:"teal",variant:"ghost",borderRadius:"8px",children:"Movies"})})}),Object(c.jsx)(M.a,{}),Object(c.jsx)(m.a,{children:Object(c.jsx)(R.a,{onClick:n,variant:"ghost",children:"light"===t?Object(c.jsx)(Y.a,{w:4,h:4,color:"gray.600"}):Object(c.jsx)(V.a,{w:4,h:4,color:"gray.600"})})}),Object(c.jsx)(P.a,{isLoaded:!j,children:o?Object(c.jsx)(m.a,{px:"4",py:"1",children:Object(c.jsxs)(N.a,{children:[Object(c.jsx)(N.e,{children:Object(c.jsx)(B.a,{mr:"16px",size:"sm",src:s.picture,loading:"lazy",_hover:{cursor:"pointer"}})}),Object(c.jsx)(G.a,{children:Object(c.jsxs)(N.d,{children:[Object(c.jsx)(N.b,{}),Object(c.jsx)(N.c,{w:"xs",children:Object(c.jsx)(R.a,{colorScheme:"teal",onClick:function(){return i({returnTo:window.location.origin})},children:"Log out"})})]})})]})}):Object(c.jsx)(m.a,{px:"4",children:Object(c.jsx)(R.a,{colorScheme:"teal",onClick:function(){return a()},children:"Log in"})})})]})},U=n(32),Q=n.n(U),Z=n(52),K=n(297),X=n(298),$=function(e){var t=e.action,n=e.actionLink;return Object(c.jsx)(m.a,{children:Object(c.jsx)(l.c,{to:n,children:Object(c.jsxs)(R.a,{maxW:"md",w:"150px",h:"150px",boxShadow:"base",borderStyle:"dashed",borderColor:"teal.500",borderRadius:"md",opacity:"1",bg:Object(p.d)("gray.50","gray.700"),children:[Object(c.jsx)(E.a,{display:"block",w:6,h:6,pr:"2",position:"absolute",top:"30%",right:"40%"}),Object(c.jsx)(y.a,{display:"block",fontSize:"xl",mt:"8",children:t})]})})})},ee="https://cast1ng-agency.herokuapp.com/api",te=function(){return W()("https://cast1ng-agency.herokuapp.com/api/movies",{headers:{"content-type":"application/json"}}).then((function(e){return e.data})).catch((function(e){e.response?console.log(e.response):e.request&&console.log(e.request)}))},ne=function(e){var t=ee+"/movies/"+e;return W()(t,{headers:{"content-type":"application/json"}}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request&&console.log(e.request)}))},ce=function(e,t){var n=ee+"/movies/"+e;return W()(n,{method:"DELETE",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request}))},re=function(e,t){return W()("https://cast1ng-agency.herokuapp.com/api/movies",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)},data:e}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request}))},ae=function(e,t,n){var c=ee+"/movies/"+t;return W()(c,{method:"PATCH",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(n)},data:e}).then((function(e){return e.data})).catch((function(e){if(e.response)return e.response.data;e.request}))},ie=function(){var e=Object(r.useState)(0),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(0),s=Object(x.a)(i,2),o=s[0],j=s[1],d=Object(r.useState)(null),u=Object(x.a)(d,2),h=u[0],f=u[1],g=Object(b.b)(),v=g.user,_=g.isAuthenticated,S=(g.getIdTokenClaims,g.getAccessTokenSilently);return Object(r.useEffect)((function(){te().then((function(e){a(e.movies.length)})).catch((function(e){console.log(e)})),z().then((function(e){j(e.actors.length)})).catch((function(e){console.log(e)})),function(){var e=Object(Z.a)(Q.a.mark((function e(){var t,n,c,r,a,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="coffeee-shop-fsnd.us.auth0.com",e.prev=1,e.next=4,S();case 4:return n=e.sent,console.log(n),c="https://".concat(t,"/api/v2/users/").concat(v.sub),e.next=9,fetch(c,{headers:{Authorization:"Bearer ".concat(n)}});case 9:return r=e.sent,console.log(r.json()),e.next=13,r.json();case 13:a=e.sent,i=a.user_metadata,f(i),console.log(i),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}()()}),[h]),Object(c.jsxs)(O.a,{maxW:"xl",pt:"20",px:"20",position:"relative",minH:"calc(100vh - 81px)",centerContent:!0,children:[h?Object(c.jsx)("pre",{children:JSON.stringify(h,null,2)}):"No user metadata defined",Object(c.jsx)(y.a,{textStyle:"heading",children:"Dashboard"}),Object(c.jsxs)(m.a,{mt:"20",textAlign:"center",children:[Object(c.jsxs)(y.a,{fontSize:"lg",children:["Welcome ",_?v.nickname+" !":"!"]}),Object(c.jsxs)(y.a,{fontSize:"md",children:["you're in the ",Object(c.jsx)("strong",{children:_?"user":"guest"})," ","Dashboard"]})]}),Object(c.jsxs)(A.a,{columns:[1,2,4],spacing:"20px",mt:"10",children:[Object(c.jsx)(m.a,{maxW:"md",w:"150px",h:"150px",boxShadow:"base",borderRadius:"md",opacity:"1",bg:Object(p.d)("gray.50","gray.700"),children:Object(c.jsxs)(K.a,{pt:"8",pl:"4",children:[Object(c.jsx)(K.c,{fontSize:"xl",children:"Actors"}),Object(c.jsx)(K.d,{children:o}),Object(c.jsx)(K.b,{children:Object(c.jsx)(X.a,{as:l.b,to:"/actors",textStyle:"links",children:"View all actors"})})]})}),Object(c.jsx)(m.a,{maxW:"md",w:"150px",h:"150px",boxShadow:"base",borderRadius:"md",opacity:"1",bg:Object(p.d)("gray.50","gray.700"),children:Object(c.jsxs)(K.a,{pt:"8",pl:"4",children:[Object(c.jsx)(K.c,{fontSize:"xl",children:"Movies"}),Object(c.jsx)(K.d,{children:n}),Object(c.jsx)(K.b,{children:Object(c.jsx)(X.a,{as:l.b,to:"/movies",textStyle:"links",children:"View all movies"})})]})}),_?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)($,{action:"Add actors",actionLink:"/actors/add"}),Object(c.jsx)($,{action:"Add movies",actionLink:"/movies/add"})]}):null]})]})},se=n(299),oe=n(300),le=n(58),je=function(e){var t=Object(r.useState)({id:0,first_name:"",lastname:"",age:"",gender:"",image_link:"",seeking_role:!1,movies:[]}),n=Object(x.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(!1),o=Object(x.a)(s,2),d=o[0],u=o[1],h=Object(b.b)(),p=h.getAccessTokenSilently,_=h.isAuthenticated,k=h.user,A=Object(r.useRef)(),E=Object(w.a)(),F=Object(j.f)(),W=e.match.params.actorId;Object(r.useEffect)((function(){I(W).then((function(e){e.success?i(e.actor):F.push("/404")}))}),[]);var q=function(){var e=Object(Z.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,e.next=5,T(W,t);case 5:e.sent.success?(E({title:"Actor deleted",description:"Selected actor deleted successfully",status:"success",duration:3e3,isClosable:!0}),u(!1)):E({title:"Error",description:"An error has occured, Please try again later.",status:"error",duration:3e3,isClosable:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(O.a,{maxW:"xl",position:"relative",minH:"calc(100vh - 81px)",centerContent:!0,children:[Object(c.jsx)(m.a,{px:"10",pt:"10",children:Object(c.jsxs)(y.a,{textStyle:"title",children:[a.first_name," ",a.last_name]})}),Object(c.jsxs)(se.a,{px:"10",py:"5",textStyle:"info",children:[Object(c.jsx)(C.a,{children:Object(c.jsx)(m.a,{boxSize:"xs",overflow:"hidden",boxShadow:"lg",children:Object(c.jsx)(f.a,{maxW:"xs",objectFit:"cover",src:a.image_link,alt:"Actor image",fallback:Object(c.jsx)(S,{})})})}),a.seeking_role?Object(c.jsx)(g.a,{children:"Seeking role"}):null,Object(c.jsx)(C.a,{children:Object(c.jsxs)(O.a,{maxW:"3xs",my:"4",children:[Object(c.jsxs)(v.a,{children:[Object(c.jsx)(y.a,{children:"Age: "}),Object(c.jsx)(M.a,{}),Object(c.jsxs)(y.a,{children:[a.age," yrs"]})]}),Object(c.jsxs)(v.a,{children:[Object(c.jsx)(y.a,{children:"Gender: "}),Object(c.jsx)(M.a,{}),Object(c.jsxs)(y.a,{children:[a.gender," "]})]})]})}),Object(c.jsx)(y.a,{children:"Movies: "}),a.movies.map((function(e){return Object(c.jsx)(X.a,{as:l.b,to:"/movies/".concat(e.id),textStyle:"links",children:e.title},e.id)}))]}),Object(c.jsxs)(v.a,{p:"2",children:[!_||"Executive Producer"!==k.roles_and_permissions.roles[0]&&"Casting Director"!==k.roles_and_permissions.roles[0]?null:Object(c.jsx)(l.c,{to:"/actors/".concat(W,"/edit"),children:Object(c.jsx)(R.a,{mr:"2",children:"Edit"})}),_&&"Executive Producer"===k.roles_and_permissions.roles[0]?Object(c.jsx)(R.a,{ml:"2",bg:"red.500",onClick:function(){return u(!0)},children:"Delete"}):null]}),Object(c.jsx)(oe.a,{isOpen:d,leastDestructiveRef:A,onClose:function(){return u(!1)},children:Object(c.jsx)(le.f,{children:Object(c.jsxs)(oe.b,{children:[Object(c.jsx)(le.e,{fontSize:"lg",fontWeight:"bold",children:"Delete Actor"}),Object(c.jsx)(le.b,{children:"Are you sure? You can't undo this action afterwards."}),Object(c.jsxs)(le.d,{children:[Object(c.jsx)(R.a,{ref:A,onClick:function(){return u(!1)},children:"Cancel"}),Object(c.jsx)(R.a,{colorScheme:"red",onClick:function(){return q()},ml:3,children:"Delete"})]})]})})})]})},de=function(e){var t=e.movie,n=t.id,r=t.title,i=t.poster,s=t.release_date,o=t.actors;return Object(c.jsx)(O.a,{children:Object(c.jsx)(m.a,{maxW:"md",w:"250px",h:"350px",rounded:"lg",borderRadius:"sm",boxShadow:"md",role:"group",bg:Object(p.d)("white","gray.700"),children:Object(c.jsxs)(l.c,{to:"/movies/".concat(n),children:[Object(c.jsxs)(m.a,{position:"absolute",w:"250px",h:"350px",py:"70px",textAlign:"center",color:"gray.300",fontWeight:"semibold",letterSpacing:"5px",fontSize:"xs",opacity:"0",textTransform:"uppercase",_groupHover:{opacity:1,transition:"opacity 0.2s ease-in",backgroundImage:"linear-gradient(to bottom, hsla(0, 0%, 0%, 0) 0%,hsla(0, 0%, 0%, 0.762) 94.1%,hsla(0, 0%, 0%, 0.790) 100%)"},children:[s.substring(7,16),Object(c.jsx)(y.a,{as:"p",mt:"200px",letterSpacing:"2px",children:o.slice(0,3).map((function(e,t){return t===o.length-1||2===t?Object(c.jsxs)(a.a.Fragment,{children:[" ",e.last_name]},e.id):Object(c.jsxs)(a.a.Fragment,{children:[" ",e.last_name," \u2022"]},e.id)}))})]}),Object(c.jsx)(m.a,{position:"absolute",w:"250px",mx:"auto",my:"auto",textAlign:"center",fontSize:"lg",fontWeight:"bold",textStyle:"heading",color:"white",pt:"275px",as:"span",_groupHover:{transform:"translateY(-60%)",transition:"transform 1000ms cubic-bezier(0.19, 1, 0.22, 1)"},children:r}),Object(c.jsx)(f.a,{w:"250px",h:"350px",src:i,alt:"movie poster",objectFit:"cover",fallback:Object(c.jsx)(S,{})})]})})})},be=function(){var e=Object(r.useState)([]),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Object(w.a)(),s=Object(b.b)().isAuthenticated;return Object(r.useEffect)((function(){te().then((function(e){a(e.movies)})).catch((function(e){console.log(e),i({title:"Error",description:"Error has occured, Please try again later.",status:"error",duration:3e3,isClosable:!0})}))}),[]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(O.a,{maxW:"xl",position:"relative",minH:"calc(100vh - 81px)",children:[Object(c.jsxs)(A.a,{columns:2,spacing:[52,36],pt:"20",children:[Object(c.jsx)(m.a,{children:Object(c.jsx)(C.a,{h:"80px",children:Object(c.jsx)(y.a,{textStyle:"heading",children:"Movies"})})}),Object(c.jsx)(m.a,{children:Object(c.jsx)(C.a,{h:"80px",children:s?Object(c.jsx)(l.c,{to:"/movies/add",children:Object(c.jsxs)(R.a,{colorScheme:"teal",variant:"solid",children:[Object(c.jsx)(E.a,{w:5,h:5,pr:"2"})," Add Movie"]})}):null})})]}),Object(c.jsx)(C.a,{children:Object(c.jsx)(v.a,{p:"10",mt:"5",children:Object(c.jsx)(A.a,{columns:[1,2,3],spacing:"40px",children:n.map((function(e){return Object(c.jsx)(m.a,{children:Object(c.jsx)(de,{movie:e})},e.id)}))})})})]})})},ue=function(e){var t=Object(r.useState)({id:0,title:"",poster:"",genre:"",release_date:"",seeking_talent:!1,actors:[]}),n=Object(x.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(!1),o=Object(x.a)(s,2),d=o[0],u=o[1],h=Object(b.b)(),p=h.getAccessTokenSilently,_=h.isAuthenticated,k=h.user,A=Object(r.useRef)(),E=Object(w.a)(),F=Object(j.f)(),W=e.match.params.movieId;Object(r.useEffect)((function(){ne(W).then((function(e){e.success?i(e.movie):F.push("/404")}))}),[]);var q=function(){var e=Object(Z.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,e.next=5,ce(W,t);case 5:e.sent.success?(E({title:"Movie deleted",description:"Selected movie deleted successfully",status:"success",duration:3e3,isClosable:!0}),u(!1)):E({title:"Error",description:"An error has occured, Please try again later.",status:"error",duration:3e3,isClosable:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(O.a,{maxW:"xl",position:"relative",minH:"calc(100vh - 81px)",centerContent:!0,children:[Object(c.jsx)(m.a,{px:"10",pt:"10",children:Object(c.jsx)(y.a,{textStyle:"title",children:a.title})}),Object(c.jsxs)(se.a,{px:"10",py:"5",textStyle:"info",children:[Object(c.jsx)(C.a,{children:Object(c.jsx)(m.a,{h:"450px",minW:"250px",overflow:"hidden",boxShadow:"lg",children:Object(c.jsx)(f.a,{maxW:"xs",objectFit:"cover",src:a.poster,alt:"Movie poster",fallback:Object(c.jsx)(S,{})})})}),a.seeking_talent?Object(c.jsx)(g.a,{children:"Seeking talent"}):null,Object(c.jsx)(C.a,{children:Object(c.jsxs)(O.a,{maxW:"xs",my:"4",children:[Object(c.jsxs)(v.a,{children:[Object(c.jsx)(y.a,{children:"Genre: "}),Object(c.jsx)(M.a,{}),Object(c.jsx)(y.a,{children:a.genre})]}),Object(c.jsxs)(v.a,{children:[Object(c.jsx)(y.a,{children:"Release Date: "}),Object(c.jsx)(M.a,{}),Object(c.jsx)(y.a,{children:a.release_date.substring(7,16)})]})]})}),Object(c.jsx)(y.a,{children:"Actors: "}),a.actors.map((function(e){return Object(c.jsxs)(X.a,{as:l.b,to:"/actors/".concat(e.id),textStyle:"links",children:[e.first_name," ",e.last_name]},e.id)}))]}),Object(c.jsxs)(v.a,{p:"2",children:[!_||"Executive Producer"!==k.roles_and_permissions.roles[0]&&"Casting Director"!==k.roles_and_permissions.roles[0]?null:Object(c.jsx)(l.c,{to:"/movies/".concat(W,"/edit"),children:Object(c.jsx)(R.a,{mr:"2",children:"Edit"})}),_&&"Executive Producer"===k.roles_and_permissions.roles[0]?Object(c.jsx)(R.a,{ml:"2",bg:"red.500",onClick:function(){return u(!0)},children:"Delete"}):null]}),Object(c.jsx)(oe.a,{isOpen:d,leastDestructiveRef:A,onClose:function(){return u(!1)},children:Object(c.jsx)(le.f,{children:Object(c.jsxs)(oe.b,{children:[Object(c.jsx)(le.e,{fontSize:"lg",fontWeight:"bold",children:"Delete Actor"}),Object(c.jsx)(le.b,{children:"Are you sure? You can't undo this action afterwards."}),Object(c.jsxs)(le.d,{children:[Object(c.jsx)(R.a,{ref:A,onClick:function(){return u(!1)},children:"Cancel"}),Object(c.jsx)(R.a,{colorScheme:"red",onClick:function(){return q()},ml:3,children:"Delete"})]})]})})})]})},he=n(64),xe=n(301),Oe=n(311),me=n(302),pe=n(160),fe=n(312),ge=n(30),ve=n(154),ye=n.n(ve),_e=(n(203),n(159)),Se=n(307),ke=function(e){var t=Object(r.useState)([]),n=Object(x.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){"movies"===e.data?te().then((function(e){i(e.movies)})).catch((function(e){console.log(e)})):"actors"===e.data&&z().then((function(e){i(e.actors)})).catch((function(e){console.log(e)}))}),[]),Object(c.jsx)(m.a,{boxShadow:"base",borderRadius:"lg",maxH:"165px",overflow:"auto",bg:Object(p.d)("gray.100","#ffffff0a"),children:Object(c.jsx)(_e.a,Object(o.a)(Object(o.a)({},e),{},{colorScheme:"teal",children:Object(c.jsx)(se.a,{pl:6,mt:1,spacing:1,children:a.map((function(t){return Object(c.jsx)(Se.a,{value:Number(t.id),children:"movies"===e.data?t.title:t.first_name+" "+t.last_name},t.id)}))})}))})},we=function(e){var t=Object(r.useState)({title:"",genre:"",release_date:"",poster:"",seeking_talent:!1,actors:{actor_ids:[]}}),n=Object(x.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)([]),l=Object(x.a)(s,2),d=l[0],u=l[1],h=Object(r.useState)(!1),p=Object(x.a)(h,2),f=p[0],g=p[1],v=Object(r.useState)(new Date),_=Object(x.a)(v,2),S=_[0],k=_[1],A=Object(b.b)().getAccessTokenSilently,E=Object(w.a)(),F=Object(j.f)(),W=e.match.params.movieId;Object(r.useEffect)((function(){"edit"===e.actionType&&ne(W).then((function(e){if(e.success){var t={title:e.movie.title,genre:e.movie.genre,release_date:e.movie.release_date,poster:e.movie.poster,seeking_talent:e.movie.seeking_talent,actors:{actor_ids:e.movie.actors.map((function(e){return e.id}))}};g(e.movie.seeking_talent),u(e.movie.actors.map((function(e){return e.id}))),i(t)}else F.push("/404")}))}),[]);var q=function(){var e=Object(Z.a)(Q.a.mark((function e(t,n,c){var r,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:if(r=e.sent,"edit"!==c){e.next=9;break}return e.next=6,ae(t,W,r);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,re(t,r);case 11:a=e.sent;case 12:console.log(r),a.success?(n.setSubmitting(!1),E({title:"edit"===c?"Edit movie":"Add movie",description:"edit"===c?"Movie information updated successfully.":"Movie added successfully.",status:"success",duration:3e3,isClosable:!0})):(n.setSubmitting(!1),E({title:"Error",description:"An error has occured!",status:"error",duration:3e3,isClosable:!0}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(c.jsxs)(O.a,{maxW:"xl",position:"relative",minH:"calc(100vh - 81px)",py:"20",centerContent:!0,children:[Object(c.jsx)(m.a,{px:"10",pt:"5",children:Object(c.jsx)(y.a,{textStyle:"title",children:"edit"===e.actionType?"Edit Movie":"Add a new movie"})}),Object(c.jsx)(ge.c,{initialValues:a,enableReinitialize:!0,validate:function(e){var t={};if(e.title||(t.title="Required"),e.genre||(t.genre="Required"),e.release_date=S,e.release_date||(t.release_date="Required"),e.poster)try{new URL(e.poster)}catch(n){t.poster="Invalid image url"}return e.seeking_talent=f,e.seeking_talent||(t.seeking_talent="Required"),t},onSubmit:function(t,n){t.actors.actors_id=d,t.seeking_talent="true"===f,"edit"===e.actionType?q(t,n,"edit"):q(t,n,"add")},children:function(e){return Object(c.jsxs)(ge.b,{children:[Object(c.jsxs)(se.b,{mt:"16",spacing:8,align:"stretch",w:["xs","sm","md","md"],children:[Object(c.jsx)(ge.a,{name:"title",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.title&&n.touched.title,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"title",children:"Movie Title"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"title",variant:"filled",placeholder:"title"})),Object(c.jsx)(me.a,{children:n.errors.title})]})}}),Object(c.jsx)(ge.a,{name:"genre",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.genre&&n.touched.genre,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"genre",children:"Genre"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"genre",variant:"filled",placeholder:"genre"})),Object(c.jsx)(me.a,{children:n.errors.genre})]})}}),Object(c.jsx)(ge.a,{name:"poster",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.poster&&n.touched.poster,children:[Object(c.jsx)(xe.a,{htmlFor:"poster",children:"Poster"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"poster",variant:"filled",placeholder:"https://"})),Object(c.jsx)(me.a,{children:n.errors.poster})]})}}),Object(c.jsx)(ge.a,{name:"release_date",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.release_date&&n.touched.release_date,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"release_date",children:"Release Date"}),Object(c.jsx)(ye.a,Object(o.a)(Object(o.a)({},t),{},{selected:S,onChange:function(e){return k(e)}})),Object(c.jsx)(me.a,{children:n.errors.release_date})]})}}),Object(c.jsx)(ge.a,{name:"seeking_talent",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.seeking_talent&&n.touched.seeking_talent,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"seeking_talent",children:"Seeking talent"}),Object(c.jsx)(pe.a,Object(o.a)(Object(o.a)({},t),{},{onChange:g,value:f,children:Object(c.jsxs)(se.a,{direction:"row",spacing:5,children:[Object(c.jsx)(fe.a,{colorScheme:"green",value:"true",children:"Yes"}),Object(c.jsx)(fe.a,{colorScheme:"red",value:"false",children:"No"})]})})),Object(c.jsx)(me.a,{children:n.errors.seeking_talent})]})}}),Object(c.jsxs)(he.a,{children:[Object(c.jsx)(xe.a,{htmlFor:"movies",children:"Actors: "}),Object(c.jsx)(ke,{data:"actors",value:d,onChange:function(e){!function(e){var t=e.map((function(e){return Number(e)}));u(t)}(e)}})]})]}),Object(c.jsx)(C.a,{children:Object(c.jsx)(R.a,{mt:8,colorScheme:"teal",isLoading:e.isSubmitting,type:"submit",children:"Submit"})})]})}})]})},Ae=function(e){var t=Object(r.useState)({first_name:"",last_name:"",age:"",gender:"",image_link:"",seeking_role:!1,movies:{movie_ids:[]}}),n=Object(x.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)([]),l=Object(x.a)(s,2),d=l[0],u=l[1],h=Object(r.useState)(!1),p=Object(x.a)(h,2),f=p[0],g=p[1],v=Object(b.b)().getAccessTokenSilently,_=Object(w.a)(),S=Object(j.f)(),k=e.match.params.actorId;Object(r.useEffect)((function(){"edit"===e.actionType&&I(k).then((function(e){if(e.success){var t={first_name:e.actor.first_name,last_name:e.actor.last_name,age:e.actor.age,gender:e.actor.gender,image_link:e.actor.image_link,seeking_role:e.actor.seeking_role,movies:{movie_ids:e.actor.movies.map((function(e){return e.id}))}};g(e.actor.seeking_role),u(e.actor.movies.map((function(e){return e.id}))),i(t)}else S.push("/404")}))}),[]);var A=function(){var e=Object(Z.a)(Q.a.mark((function e(t,n,c){var r,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:if(r=e.sent,"edit"!==c){e.next=9;break}return e.next=6,H(t,k,r);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,D(t,r);case 11:a=e.sent;case 12:console.log(r),a.success?(n.setSubmitting(!1),_({title:"edit"===c?"Edit actor":"Add actor",description:"edit"===c?"Actor information updated successfully.":"Actor added successfully.",status:"success",duration:3e3,isClosable:!0})):(n.setSubmitting(!1),_({title:"Error",description:"An error has occured!",status:"error",duration:3e3,isClosable:!0}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(c.jsxs)(O.a,{maxW:"xl",position:"relative",minH:"calc(100vh - 81px)",py:"20",centerContent:!0,children:[Object(c.jsx)(m.a,{px:"10",pt:"5",children:Object(c.jsx)(y.a,{textStyle:"title",children:"edit"===e.actionType?"Edit actor":"Enroll a new actor"})}),Object(c.jsx)(ge.c,{initialValues:a,enableReinitialize:!0,validate:function(e){var t={};if(e.first_name||(t.first_name="Required"),e.last_name||(t.last_name="Required"),e.age?(isNaN(e.age)||e.age>100)&&(t.age="Not a valid age value"):t.age="Required",e.gender||(t.gender="Required"),e.image_link)try{new URL(e.image_link)}catch(n){t.image_link="Invalid image url"}return e.seeking_role=f,e.seeking_role||(t.seeking_role="Required"),t},onSubmit:function(t,n){t.age=Number(t.age),t.movies.movie_ids=d,t.seeking_role="true"===f,"edit"===e.actionType?A(t,n,"edit"):A(t,n,"add")},children:function(e){return Object(c.jsxs)(ge.b,{children:[Object(c.jsxs)(se.b,{mt:"16",spacing:8,align:"stretch",w:["xs","sm","md","md"],children:[Object(c.jsx)(ge.a,{name:"first_name",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.first_name&&n.touched.first_name,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"first_name",children:"First Name"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"first_name",variant:"filled",placeholder:"First name"})),Object(c.jsx)(me.a,{children:n.errors.first_name})]})}}),Object(c.jsx)(ge.a,{name:"last_name",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.last_name&&n.touched.last_name,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"last_name",children:"Last Name"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"last_name",variant:"filled",placeholder:"Last name"})),Object(c.jsx)(me.a,{children:n.errors.last_name})]})}}),Object(c.jsx)(ge.a,{name:"age",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.age&&n.touched.age,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"age",children:"Age"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"age",variant:"filled",placeholder:"age"})),Object(c.jsx)(me.a,{children:n.errors.age})]})}}),Object(c.jsx)(ge.a,{name:"gender",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.gender&&n.touched.gender,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"gender",children:"Gender"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"gender",variant:"filled",placeholder:"gender"})),Object(c.jsx)(me.a,{children:n.errors.gender})]})}}),Object(c.jsx)(ge.a,{name:"image_link",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.image_link&&n.touched.image_link,children:[Object(c.jsx)(xe.a,{htmlFor:"image_link",children:"Profile image"}),Object(c.jsx)(Oe.a,Object(o.a)(Object(o.a)({},t),{},{id:"image_link",variant:"filled",placeholder:"https://"})),Object(c.jsx)(me.a,{children:n.errors.image_link})]})}}),Object(c.jsx)(ge.a,{name:"seeking_role",children:function(e){var t=e.field,n=e.form;return Object(c.jsxs)(he.a,{isInvalid:n.errors.seeking_role&&n.touched.seeking_role,isRequired:!0,children:[Object(c.jsx)(xe.a,{htmlFor:"seeking_role",children:"Seeking roles"}),Object(c.jsx)(pe.a,Object(o.a)(Object(o.a)({},t),{},{onChange:g,value:f,children:Object(c.jsxs)(se.a,{direction:"row",spacing:5,children:[Object(c.jsx)(fe.a,{colorScheme:"green",value:"true",children:"Yes"}),Object(c.jsx)(fe.a,{colorScheme:"red",value:"false",children:"No"})]})})),Object(c.jsx)(me.a,{children:n.errors.seeking_role})]})}}),Object(c.jsxs)(he.a,{children:[Object(c.jsx)(xe.a,{htmlFor:"movies",children:"Movies: "}),Object(c.jsx)(ke,{data:"movies",value:d,onChange:function(e){!function(e){var t=e.map((function(e){return Number(e)}));u(t)}(e)}})]})]}),Object(c.jsx)(C.a,{children:Object(c.jsx)(R.a,{mt:8,colorScheme:"teal",isLoading:e.isSubmitting,type:"submit",children:"Submit"})})]})}})]})},Ce=function(){return Object(c.jsx)(O.a,{maxW:"xl",pt:"20",px:"20",position:"relative",minH:"calc(100vh - 81px)",centerContent:!0,children:Object(c.jsxs)(m.a,{mt:"20",textAlign:"center",children:[Object(c.jsx)(y.a,{textStyle:"heading",children:"404"}),Object(c.jsx)(y.a,{textStyle:"title",my:"10",children:"Not Found"}),Object(c.jsx)(X.a,{as:l.b,to:"/",textStyle:"links",children:"Go home"})]})})},Re=function(){return Object(c.jsx)(m.a,{as:"footer",textAlign:"center",position:"absolute",bottom:"2",w:"100%",children:Object(c.jsx)(X.a,{href:"https://github.com/maryamradd/fsnd-CastingAgency",isExternal:!0,decoration:"none",fontSize:"sm",opacity:"0.35",_hover:{decoration:"none",opacity:.75},children:"view src on Github"})})};var Ee=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)(J,{}),Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{exact:!0,path:"/",component:ie}),Object(c.jsx)(j.a,{exact:!0,path:"/movies",component:be}),Object(c.jsx)(h,{exact:!0,path:"/movies/add",component:we}),Object(c.jsx)(j.a,{exact:!0,path:"/movies/:movieId",component:ue}),Object(c.jsx)(h,{exact:!0,path:"/movies/:movieId/edit",render:function(e){return Object(c.jsx)(we,Object(o.a)(Object(o.a)({},e),{},{actionType:"edit"}))}}),Object(c.jsx)(j.a,{exact:!0,path:"/actors",component:L}),Object(c.jsx)(h,{exact:!0,path:"/actors/add",component:Ae}),Object(c.jsx)(j.a,{exact:!0,path:"/actors/:actorId",component:je}),Object(c.jsx)(h,{exact:!0,path:"/actors/:actorId/edit",render:function(e){return Object(c.jsx)(Ae,Object(o.a)(Object(o.a)({},e),{},{actionType:"edit"}))}}),Object(c.jsx)(j.a,{component:Ce})]}),Object(c.jsx)(Re,{})]})})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},We=function(e){var t=e.children,n=Object(j.f)();return Object(c.jsx)(b.a,{domain:"coffeee-shop-fsnd.us.auth0.com",clientId:"EuAfCzJjdnIVQIMF2eBgcefrxM3jdeyZ",redirectUri:window.location.origin,onRedirectCallback:function(e){n.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:"casting-agency-api",children:t})},qe=n(308),ze=n(303),Ie=n(288),Te=Object(ze.a)({styles:{global:function(e){return{body:{color:Object(Ie.a)("gray.700","whiteAlpha.900")(e),fontFamily:"Lora, serif",fontWeights:{normal:400,medium:500,bold:700}},label:{color:Object(Ie.a)("red.700","green.900")(e)}}}},textStyles:{heading:{textAlign:"center",fontWeight:"bold",letterSpacing:"-0.015em",lineHeight:"1.24",fontSize:{base:"2rem",md:"3.5rem"}},subheading:{textAlign:"center",fontWeight:"bold",letterSpacing:"-0.015em",lineHeight:"1.24",fontSize:{base:"1.70rem",md:"2.70rem"}},title:{textAlign:"center",fontWeight:"semibold",letterSpacing:"-0.015em",lineHeight:"1.24",fontSize:{base:"1.60rem",md:"2.60rem"}},info:{textAlign:"center",fontWeight:"regular",letterSpacing:"0.015em",lineHeight:"1.55",fontSize:{base:"1.15rem",md:"1.25rem"}},links:{color:"teal.500",fontWeight:"semibold",transition:"color 0.15s",transitionTimingFunction:"ease-out",_hover:{color:"teal.600"}}}});s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(We,{children:Object(c.jsx)(qe.a,{theme:Te,children:Object(c.jsx)(Ee,{})})})}),document.getElementById("root")),Fe()}},[[264,1,2]]]);
//# sourceMappingURL=main.3a9d7518.chunk.js.map